<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë¶„ìì‹ì„ í†µí•œ ê·¹ì„±, ë¬´ê·¹ì„± ë¶„ì êµ¬ë¶„í•˜ê¸°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; padding: 0; background: #f0f4f8; }
    h1, h2 { text-align: center; }
    .box { background: white; border-radius: 10px; padding: 20px; margin: 20px auto; max-width: 700px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    button, select { padding: 10px; font-size: 16px; margin: 5px; border-radius: 6px; border: 1px solid #ccc; }
    #timer, #score { font-size: 20px; color: #e74c3c; text-align: center; }
    #result, #questionLabel, #history, #hint, #report { font-weight: bold; margin-top: 15px; font-size: 18px; text-align: center; white-space: pre-line; }
    img { max-width: 100%; margin-top: 10px; border: 1px solid #ccc; border-radius: 6px; }
    @media (max-width: 600px) { body { margin: 10px; } }
  </style>
</head>
<body>
  <h1>ğŸ“˜ ë¶„ìì‹ì„ í†µí•œ ê·¹ì„±, ë¬´ê·¹ì„± ë¶„ì êµ¬ë¶„í•˜ê¸°</h1>
  <h2>ğŸ“Œ ëŒ€ìƒ: ê³ ë“±í•™êµ 2í•™ë…„</h2>
  <h2>ğŸ“Œ ê³¼ëª©: í™”í•™ 1</h2>

  <div class="box">
    <p><strong>ë¶„ìì‹ì„ ë³´ê³  ê·¹ì„± ë¶„ìì¸ì§€ ë¬´ê·¹ì„± ë¶„ìì¸ì§€ íŒë‹¨í•˜ì„¸ìš”.</strong></p>
    <label for="difficulty">ë‚œì´ë„ ì„ íƒ:</label>
    <select id="difficulty" onchange="setDifficulty()">
      <option value="easy">í•˜: ëŒ€ì¹­ êµ¬ì¡° ìœ„ì£¼</option>
      <option value="medium">ì¤‘: í˜¼í•© êµ¬ì¡°</option>
      <option value="hard">ìƒ: ë¹„ëŒ€ì¹­ êµ¬ì¡° ì¤‘ì‹¬</option>
    </select>
    <br><br>
    <label id="questionLabel">ë¬¸ì œ: ë¡œë”© ì¤‘...</label>
    <br>
    <select id="answerSelect">
      <option value="ê·¹ì„±">ê·¹ì„±</option>
      <option value="ë¬´ê·¹ì„±">ë¬´ê·¹ì„±</option>
    </select>
    <button onclick="submitAnswer()">ì •ë‹µ ì œì¶œ</button>
    <button onclick="showHint()">íŒíŠ¸ ë³´ê¸°</button>
    <div id="result"></div>
    <img id="feedback-img" src="" alt="ë¶„ì êµ¬ì¡°" style="display:none;">
    <p id="explanation"></p>
    <p id="hint"></p>
  </div>

  <div class="box">
    <label for="timeSelect">â±ï¸ ì‹œê°„ ì„¤ì •:</label>
    <select id="timeSelect">
      <option value="30">30ì´ˆ</option>
      <option value="60">1ë¶„</option>
      <option value="90">1ë¶„ 30ì´ˆ</option>
      <option value="120">2ë¶„</option>
    </select>
    <button onclick="startProblem()">ì‹œê°„ ì‹œì‘</button>
    <button onclick="pauseTimer()">ì‹œê°„ ë©ˆì¶¤</button>
    <div id="timer"></div>
  </div>

  <div class="box">
    <div id="score">ì ìˆ˜: 0 | ì •ë‹µë¥ : 0%</div>
    <h3>ğŸ“Š ë¬¸ì œ í’€ì´ ê¸°ë¡</h3>
    <ul id="history"></ul>
    <div id="report"></div>
    <button onclick="resetSession()">ğŸ”„ ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>
  </div>

<script>
const moleculeDB = [
  { name: "CO2", polarity: "ë¬´ê·¹ì„±", difficulty: "easy", img: "https://i.imgur.com/7d3GyVG.png", explanation: "CO2ëŠ” ì„ í˜• êµ¬ì¡°ì´ê³ , C-O ê°„ ì „ê¸°ìŒì„±ë„ ì°¨ì´(1.0)ë¡œ ì¸í•´ CëŠ” ë¶€ë¶„ ì–‘ì „í•˜, OëŠ” ë¶€ë¶„ ìŒì „í•˜ë¥¼ ë ì§€ë§Œ ë¶„ìê°€ ì™„ì „íˆ ëŒ€ì¹­ì´ë¯€ë¡œ ë¬´ê·¹ì„±ì…ë‹ˆë‹¤." },
  { name: "H2O", polarity: "ê·¹ì„±", difficulty: "hard", img: "https://i.imgur.com/ITz8aIG.png", explanation: "H2OëŠ” êµ½ì€ êµ¬ì¡°ì´ë©° ìŒê·¹ì ëª¨ë©˜íŠ¸ê°€ ì¡´ì¬í•˜ì—¬ ê·¹ì„±ì…ë‹ˆë‹¤." },
  { name: "CH4", polarity: "ë¬´ê·¹ì„±", difficulty: "easy", img: "https://i.imgur.com/MqzOCkt.png", explanation: "CH4ëŠ” ì‚¬ë©´ì²´ ëŒ€ì¹­ êµ¬ì¡°ë¡œ ìŒê·¹ì ëª¨ë©˜íŠ¸ê°€ ìƒì‡„ë˜ì–´ ë¬´ê·¹ì„±ì…ë‹ˆë‹¤." },
  { name: "NH3", polarity: "ê·¹ì„±", difficulty: "medium", img: "https://i.imgur.com/PK5EvUM.png", explanation: "NH3ëŠ” ë¹„ëŒ€ì¹­ êµ¬ì¡°ë¡œ ìŒê·¹ì ëª¨ë©˜íŠ¸ê°€ ì¡´ì¬í•˜ì—¬ ê·¹ì„±ì…ë‹ˆë‹¤." },
  { name: "CCl4", polarity: "ë¬´ê·¹ì„±", difficulty: "medium", img: "https://i.imgur.com/KDJKnGp.png", explanation: "CCl4ëŠ” ëŒ€ì¹­ êµ¬ì¡°ë¡œ ìŒê·¹ì ëª¨ë©˜íŠ¸ê°€ ìƒì‡„ë˜ì–´ ë¬´ê·¹ì„±ì…ë‹ˆë‹¤." },
  { name: "CH3Cl", polarity: "ê·¹ì„±", difficulty: "medium", img: "https://i.imgur.com/HqNOcPe.png", explanation: "CH3Clì€ ë¹„ëŒ€ì¹­ êµ¬ì¡°ë¡œ ì¸í•´ ê·¹ì„±ì…ë‹ˆë‹¤." },
  { name: "O2", polarity: "ë¬´ê·¹ì„±", difficulty: "easy", img: "https://i.imgur.com/W7JoX6r.png", explanation: "O2ëŠ” ê°™ì€ ì›ì†Œë¡œ ì´ë£¨ì–´ì§„ ì´ì›ì ë¶„ìë¡œ ë¬´ê·¹ì„±ì…ë‹ˆë‹¤." },
  { name: "SO2", polarity: "ê·¹ì„±", difficulty: "hard", img: "https://i.imgur.com/hyJl9MZ.png", explanation: "SO2ëŠ” êµ½ì€ êµ¬ì¡°ì´ê³  ìŒê·¹ì ëª¨ë©˜íŠ¸ê°€ ì¡´ì¬í•˜ì—¬ ê·¹ì„±ì…ë‹ˆë‹¤." },
  { name: "HCl", polarity: "ê·¹ì„±", difficulty: "easy", img: "https://i.imgur.com/B5OBSEk.png", explanation: "HClì€ ì „ê¸°ìŒì„±ë„ ì°¨ì´ë¡œ ì¸í•´ ìŒê·¹ì ëª¨ë©˜íŠ¸ê°€ ì¡´ì¬í•˜ì—¬ ê·¹ì„±ì…ë‹ˆë‹¤." },
  { name: "BF3", polarity: "ë¬´ê·¹ì„±", difficulty: "hard", img: "https://i.imgur.com/2bNZF7Z.png", explanation: "BF3ëŠ” í‰ë©´ ì‚¼ê°í˜• ëŒ€ì¹­ êµ¬ì¡°ë¡œ ìŒê·¹ì ëª¨ë©˜íŠ¸ê°€ ìƒì‡„ë˜ì–´ ë¬´ê·¹ì„±ì…ë‹ˆë‹¤." }
];

let currentSet = [];
let currentQuestion = {};
let correct = 0, total = 0;
let countdown, remainingTime, isPaused = false;

function setDifficulty() {
  const level = document.getElementById("difficulty").value;
  currentSet = moleculeDB.filter(m => m.difficulty === level);
  nextRandomQuestion();
}

function nextRandomQuestion() {
  const idx = Math.floor(Math.random() * currentSet.length);
  currentQuestion = currentSet[idx];
  document.getElementById("questionLabel").textContent = `ë¬¸ì œ: ${currentQuestion.name}ëŠ” ê·¹ì„± ë¶„ìì¸ê°€ìš”, ë¬´ê·¹ì„± ë¶„ìì¸ê°€ìš”?`;
  document.getElementById("result").textContent = "";
  document.getElementById("explanation").textContent = "";
  document.getElementById("feedback-img").style.display = "none";
  document.getElementById("hint").textContent = "";
}

function submitAnswer() {
  const userAnswer = document.getElementById("answerSelect").value;
  const resultEl = document.getElementById("result");
  const imgEl = document.getElementById("feedback-img");
  const explanationEl = document.getElementById("explanation");
  const history = document.getElementById("history");

  total++;
  let feedback;

  if (userAnswer === currentQuestion.polarity) {
    correct++;
    resultEl.innerHTML = `âœ… ì •ë‹µì…ë‹ˆë‹¤! ${currentQuestion.name}ëŠ” ${currentQuestion.polarity} ë¶„ìì…ë‹ˆë‹¤.`;
    feedback = `âœ”ï¸ ${currentQuestion.explanation}`;
  } else {
    resultEl.innerHTML = `âŒ ì˜¤ë‹µì…ë‹ˆë‹¤. ${currentQuestion.name}ëŠ” ${currentQuestion.polarity} ë¶„ìì…ë‹ˆë‹¤.`;
    feedback = `âŒ ì™œ ì˜¤ë‹µì¸ê°€ìš”?\n${currentQuestion.explanation}`;
  }

  explanationEl.textContent = feedback;
  imgEl.src = currentQuestion.img;
  imgEl.style.display = 'block';

  const li = document.createElement("li");
  li.textContent = `${currentQuestion.name}: ${userAnswer} â†’ ${userAnswer === currentQuestion.polarity ? 'ì •ë‹µ' : 'ì˜¤ë‹µ'}`;
  history.appendChild(li);

  updateScore();
  generateReport();
  nextRandomQuestion();
}

function updateScore() {
  const rate = total === 0 ? 0 : Math.round((correct / total) * 100);
  document.getElementById("score").textContent = `ì ìˆ˜: ${correct} / ${total} | ì •ë‹µë¥ : ${rate}%`;
}

function generateReport() {
  const rate = total === 0 ? 0 : Math.round((correct / total) * 100);
  const report = document.getElementById("report");
  let msg = "";
  if (rate >= 80) msg = "ğŸ‰ ì•„ì£¼ ì˜í•˜ê³  ìˆì–´ìš”! êµ¬ì¡°ì™€ ìŒê·¹ì ëª¨ë©˜íŠ¸ ì´í•´ê°€ ì˜ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.";
  else if (rate >= 60) msg = "ğŸ‘ ê´œì°®ì€ ê²°ê³¼ì˜ˆìš”. ìŒê·¹ì ë°©í–¥ì„ ë‹¤ì‹œ ë³µìŠµí•´ë³´ì„¸ìš”.";
  else msg = "ğŸ“š ë³µìŠµì´ í•„ìš”í•´ ë³´ì—¬ìš”. ì „ê¸°ìŒì„±ë„ ì°¨ì´ì™€ ìŒê·¹ì ëª¨ë©˜íŠ¸ì˜ ìƒì‡„ ì—¬ë¶€ë¥¼ ê¼­ í™•ì¸í•˜ì„¸ìš”.";
  report.textContent = `ğŸ“ˆ í”¼ë“œë°± ë¦¬í¬íŠ¸: ì •ë‹µë¥  ${rate}% - ${msg}`;
}

function showHint() {
  document.getElementById("hint").textContent = "ğŸ’¡ íŒíŠ¸: ì „ê¸°ìŒì„±ë„ ì°¨ì´ê°€ í¬ê³  ë¹„ëŒ€ì¹­ êµ¬ì¡°ì¼ìˆ˜ë¡ ìŒê·¹ì ëª¨ë©˜íŠ¸ê°€ ìƒì‡„ë˜ì§€ ì•Šì•„ ê·¹ì„±ì´ ë©ë‹ˆë‹¤.";
}

function startProblem() {
  clearInterval(countdown);
  remainingTime = parseInt(document.getElementById("timeSelect").value);
  isPaused = false;
  updateTimer();
  countdown = setInterval(() => {
    if (!isPaused) {
      remainingTime--;
      updateTimer();
      if (remainingTime <= 0) {
        clearInterval(countdown);
        const retry = confirm("â° ì‹œê°„ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ë‹¤ì‹œ ë„ì „í•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
        if (retry) startProblem();
      }
    }
  }, 1000);
}

function pauseTimer() {
  isPaused = !isPaused;
  document.querySelector("button[onclick='pauseTimer()']").innerText = isPaused ? "ë‹¤ì‹œ ì‹œì‘" : "ì‹œê°„ ë©ˆì¶¤";
}

function updateTimer() {
  const m = String(Math.floor(remainingTime / 60)).padStart(2, '0');
  const s = String(remainingTime % 60).padStart(2, '0');
  document.getElementById("timer").innerText = `â³ ë‚¨ì€ ì‹œê°„: ${m}:${s}`;
}

function resetSession() {
  const confirmReset = confirm("ì •ë§ë¡œ ë‹¤ì‹œ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì ìˆ˜, ê¸°ë¡, ì‹œê°„ì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.");
  if (!confirmReset) return;

  correct = 0;
  total = 0;
  document.getElementById("score").textContent = "ì ìˆ˜: 0 | ì •ë‹µë¥ : 0%";
  document.getElementById("report").textContent = "";
  document.getElementById("history").innerHTML = "";
  document.getElementById("result").textContent = "";
  document.getElementById("explanation").textContent = "";
  document.getElementById("hint").textContent = "";
  document.getElementById("feedback-img").style.display = "none";
  clearInterval(countdown);
  document.getElementById("timer").textContent = "";
  isPaused = false;
  nextRandomQuestion();
}

window.onload = () => {
  document.getElementById("difficulty").value = "medium";
  setDifficulty();
};
</script>
</body>
</html>
